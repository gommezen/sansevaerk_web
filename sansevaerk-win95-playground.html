<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Sansevaerk — Win95 Warm Dojo Theme</title>
<style>
*{box-sizing:border-box;margin:0}
body{font-family:'Segoe UI',Tahoma,sans-serif;background:#1a1410;color:#e8ddd0;display:flex;height:100vh;overflow:hidden}

/* ---- Controls panel ---- */
.controls{width:340px;min-width:340px;background:#231d17;border-right:2px solid #3a3028;overflow-y:auto;padding:0;display:flex;flex-direction:column}
.controls-title{background:linear-gradient(90deg,#5c3a1a,#3a2510);color:#e8ddd0;padding:4px 8px;font-size:13px;font-weight:bold;display:flex;align-items:center;gap:6px;border-bottom:2px solid #3a3028}
.controls-title::before{content:"";display:inline-block;width:14px;height:14px;background:#e8943a;border:1px outset #c07828}
.controls-inner{padding:12px;display:flex;flex-direction:column;gap:4px;flex:1;overflow-y:auto}
.controls h2{font-size:11px;color:#a89882;text-transform:uppercase;letter-spacing:.8px;margin:10px 0 4px;padding-top:8px;border-top:1px solid #3a3028;font-weight:normal}
.controls h2:first-child{border-top:none;margin-top:2px}

.ctrl{display:flex;align-items:center;gap:8px;font-size:12px;min-height:26px}
.ctrl label{flex:0 0 110px;color:#a89882;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.ctrl input[type=range]{flex:1;accent-color:#e8943a;height:4px}
.ctrl input[type=color]{width:32px;height:22px;border:2px inset #5a4a38;border-radius:0;background:transparent;cursor:pointer;padding:0}
.ctrl input[type=color]::-webkit-color-swatch-wrapper{padding:1px}
.ctrl input[type=color]::-webkit-color-swatch{border:none;border-radius:0}
.ctrl select{flex:1;background:#2c241c;color:#e8ddd0;border:2px inset #5a4a38;border-radius:0;padding:2px 4px;font-size:12px;font-family:inherit}
.ctrl .val{min-width:36px;text-align:right;color:#e8943a;font-family:'Courier New',monospace;font-size:11px}

/* Presets */
.presets{display:flex;flex-wrap:wrap;gap:4px;margin:6px 0 4px}
.presets button{padding:3px 10px;border:2px outset #5a4a38;border-radius:0;background:#2c241c;color:#e8ddd0;font-size:11px;cursor:pointer;font-family:inherit}
.presets button:hover{background:#3a3028}
.presets button:active{border-style:inset}
.presets button.active{background:#e8943a;color:#1a1410;border-style:inset}

/* ---- Right panel ---- */
.right{flex:1;display:flex;flex-direction:column;overflow:hidden}
.preview-wrap{flex:1;overflow-y:auto;display:flex;justify-content:center}
.preview-frame{width:100%;max-width:920px}

/* Prompt area */
.prompt-area{background:#1a1410;border-top:2px outset #5a4a38;padding:8px 12px;display:flex;flex-direction:column;gap:6px;max-height:200px}
.prompt-area h3{font-size:11px;color:#a89882;text-transform:uppercase;letter-spacing:.6px}
.prompt-text{font-family:'Courier New',monospace;font-size:12px;color:#e8ddd0;line-height:1.5;white-space:pre-wrap;overflow-y:auto;max-height:120px;padding:6px;background:#231d17;border:2px inset #5a4a38}
.copy-btn{align-self:flex-end;padding:4px 16px;border:2px outset #5a4a38;border-radius:0;background:#2c241c;color:#e8ddd0;font-size:11px;cursor:pointer;font-family:inherit}
.copy-btn:hover{background:#3a3028}
.copy-btn:active,.copy-btn.copied{border-style:inset;background:#e8943a;color:#1a1410}

/* ============ PREVIEW STYLES ============ */
.sv{font-family:var(--f)}
.sv *{box-sizing:border-box}

/* Win95 window frame */
.sv-window{border:var(--bevel-w) outset var(--hi);background:var(--win-bg);margin-bottom:12px}
.sv-titlebar{background:var(--titlebar);padding:3px 6px;display:flex;align-items:center;justify-content:space-between;margin:var(--bevel-w)}
.sv-titlebar span{color:var(--titlebar-text);font-size:13px;font-weight:bold;letter-spacing:.3px}
.sv-titlebar-btns{display:flex;gap:2px}
.sv-titlebar-btn{width:18px;height:16px;border:var(--bevel-w) outset var(--hi);background:var(--win-bg);color:var(--text);font-size:10px;line-height:1;display:flex;align-items:center;justify-content:center;cursor:pointer;padding:0;font-family:'Courier New',monospace;font-weight:bold}
.sv-titlebar-btn:active{border-style:inset}
.sv-win-body{padding:var(--win-pad);margin:0 var(--bevel-w) var(--bevel-w)}

/* Groupbox */
.sv-group{border:var(--bevel-w) groove var(--hi);padding:12px 10px 10px;margin:8px 0;position:relative}
.sv-group-label{position:absolute;top:-8px;left:10px;background:var(--win-bg);padding:0 4px;font-size:12px;color:var(--muted)}

/* Inputs */
.sv-input,.sv-select,.sv-textarea{width:100%;padding:var(--inp-pad);border:var(--bevel-w) inset var(--hi);background:var(--inp-bg);color:var(--text);font-size:14px;font-family:var(--f);border-radius:0;line-height:1.4}
.sv-input::placeholder{color:var(--muted)}
.sv-textarea{resize:vertical;min-height:40px}

/* Buttons */
.sv-btn{padding:var(--btn-pad);border:var(--bevel-w) outset var(--hi);background:var(--btn-bg);color:var(--btn-text);font-size:var(--btn-size);cursor:pointer;font-family:var(--f);border-radius:0;min-width:80px}
.sv-btn:hover{filter:brightness(1.05)}
.sv-btn:active{border-style:inset}
.sv-btn-primary{background:var(--accent);color:var(--primary-btn-text);font-weight:bold}
.sv-btn-ghost{background:transparent;color:var(--text);border:var(--bevel-w) outset var(--hi)}
.sv-btn-flat{background:var(--pill-bg);color:var(--text);border:1px solid var(--border);padding:4px 10px;font-size:12px}
.sv-btn-flat:active{border-style:inset}

/* Layout */
.sv-row{display:flex;gap:8px;align-items:stretch}
.sv-grid{display:grid;gap:var(--grid-gap);grid-template-columns:repeat(2,minmax(0,1fr));margin:8px 0}
.sv-grid label{display:grid;gap:4px;font-size:13px;color:var(--muted)}
.sv-grid .wide{grid-column:1/-1}
.sv-topbar{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:6px}
.sv-hr{border:none;border-top:var(--bevel-w) groove var(--hi);margin:12px 0}
.sv-statusbar{border-top:var(--bevel-w) groove var(--hi);padding:3px 6px;font-size:11px;color:var(--muted);display:flex;gap:12px;margin:0 var(--bevel-w) var(--bevel-w)}
.sv-statusbar span{border:1px inset var(--hi);padding:1px 6px;flex:1}

/* Session items */
.sv-item{padding:8px 10px;border:var(--bevel-w) groove var(--hi);margin:6px 0;background:var(--win-bg)}
.sv-itemTop{display:flex;justify-content:space-between;gap:8px;align-items:center}
.sv-pill{font-size:12px;color:var(--text);background:var(--pill-bg);padding:4px 8px;border:1px solid var(--border);white-space:nowrap}
.sv-pillStack{display:flex;flex-direction:column;align-items:flex-end;gap:4px}
.sv-notes{margin-top:6px;color:var(--text);font-size:13px}
.sv-muted{color:var(--muted)}

/* RPE */
.sv-rpeRow{display:flex;align-items:center;gap:8px;margin:8px 0 4px}
.sv-rpeScale{display:flex;flex-wrap:wrap;gap:3px}
.sv-rpeBtn{width:26px;height:24px;padding:0;border:var(--bevel-w) outset var(--hi);background:var(--btn-bg);color:var(--text);font-size:11px;line-height:1;cursor:pointer;font-family:var(--f);border-radius:0;display:flex;align-items:center;justify-content:center}
.sv-rpeBtn:active{border-style:inset}
.sv-rpeBtn.active{border-style:inset;background:var(--accent);color:var(--primary-btn-text)}

/* Headings */
.sv h2{font-size:14px;color:var(--text);font-weight:bold;margin:0}

/* Login */
.sv-login-row{display:flex;gap:8px;margin:8px 0}
.sv-msg{color:#cc4444;font-size:12px;margin-top:6px}
</style>
</head>
<body>

<div class="controls">
  <div class="controls-title">Theme Controls</div>
  <div class="controls-inner">

    <h2>Presets</h2>
    <div class="presets" id="presets"></div>

    <h2>Window Colors</h2>
    <div class="ctrl"><label>Desktop BG</label><input type="color" data-key="desktopBg"><span class="val" data-val="desktopBg"></span></div>
    <div class="ctrl"><label>Window BG</label><input type="color" data-key="winBg"><span class="val" data-val="winBg"></span></div>
    <div class="ctrl"><label>Titlebar</label><input type="color" data-key="titlebar"><span class="val" data-val="titlebar"></span></div>
    <div class="ctrl"><label>Titlebar text</label><input type="color" data-key="titlebarText"><span class="val" data-val="titlebarText"></span></div>
    <div class="ctrl"><label>Text</label><input type="color" data-key="text"><span class="val" data-val="text"></span></div>
    <div class="ctrl"><label>Muted</label><input type="color" data-key="muted"><span class="val" data-val="muted"></span></div>
    <div class="ctrl"><label>Accent</label><input type="color" data-key="accent"><span class="val" data-val="accent"></span></div>
    <div class="ctrl"><label>Bevel highlight</label><input type="color" data-key="hi"><span class="val" data-val="hi"></span></div>
    <div class="ctrl"><label>Border</label><input type="color" data-key="border"><span class="val" data-val="border"></span></div>

    <h2>Input & Buttons</h2>
    <div class="ctrl"><label>Input BG</label><input type="color" data-key="inpBg"><span class="val" data-val="inpBg"></span></div>
    <div class="ctrl"><label>Button BG</label><input type="color" data-key="btnBg"><span class="val" data-val="btnBg"></span></div>
    <div class="ctrl"><label>Button text</label><input type="color" data-key="btnText"><span class="val" data-val="btnText"></span></div>
    <div class="ctrl"><label>Primary btn text</label><input type="color" data-key="primaryBtnText"><span class="val" data-val="primaryBtnText"></span></div>
    <div class="ctrl"><label>Pill BG</label><input type="color" data-key="pillBg"><span class="val" data-val="pillBg"></span></div>

    <h2>Geometry</h2>
    <div class="ctrl"><label>Bevel width</label><input type="range" data-key="bevelW" min="1" max="4" step="1"><span class="val" data-val="bevelW"></span></div>
    <div class="ctrl"><label>Window padding</label><input type="range" data-key="winPad" min="4" max="24" step="2"><span class="val" data-val="winPad"></span></div>
    <div class="ctrl"><label>Input padding</label><input type="range" data-key="inpPad" min="2" max="12" step="1"><span class="val" data-val="inpPad"></span></div>
    <div class="ctrl"><label>Button padding</label><input type="range" data-key="btnPad" min="2" max="14" step="1"><span class="val" data-val="btnPad"></span></div>
    <div class="ctrl"><label>Grid gap</label><input type="range" data-key="gridGap" min="4" max="20" step="2"><span class="val" data-val="gridGap"></span></div>
    <div class="ctrl"><label>Max width</label><input type="range" data-key="maxWidth" min="560" max="1100" step="20"><span class="val" data-val="maxWidth"></span></div>

    <h2>Typography</h2>
    <div class="ctrl"><label>Font</label>
      <select data-key="font">
        <option value="'Segoe UI', Tahoma, sans-serif">Segoe UI</option>
        <option value="Tahoma, Geneva, sans-serif">Tahoma</option>
        <option value="'MS Sans Serif', Geneva, sans-serif">MS Sans Serif</option>
        <option value="'Courier New', monospace">Fixedsys</option>
        <option value="system-ui, sans-serif">System UI</option>
      </select>
    </div>
    <div class="ctrl"><label>Button font size</label><input type="range" data-key="btnSize" min="11" max="16" step="1"><span class="val" data-val="btnSize"></span></div>

    <h2>Features</h2>
    <div class="ctrl"><label>Statusbar</label>
      <select data-key="statusbar"><option value="on">Show</option><option value="off">Hide</option></select>
    </div>
    <div class="ctrl"><label>Groupbox style</label>
      <select data-key="groupbox"><option value="groove">Groove</option><option value="ridge">Ridge</option><option value="inset">Inset</option><option value="none">None</option></select>
    </div>

    <h2>Preview</h2>
    <div class="ctrl"><label>Show section</label>
      <select data-key="view">
        <option value="all">Full app</option>
        <option value="login">Login</option>
        <option value="form">Log session</option>
        <option value="day">Day overview</option>
        <option value="recent">Recent</option>
      </select>
    </div>
  </div>
</div>

<div class="right">
  <div class="preview-wrap" id="previewBg">
    <div class="preview-frame" id="previewFrame"></div>
  </div>
  <div class="prompt-area">
    <h3>Generated Prompt</h3>
    <div class="prompt-text" id="promptText"></div>
    <button class="copy-btn" id="copyBtn" onclick="copyPrompt()">Copy Prompt</button>
  </div>
</div>

<script>
const DEFAULTS = {
  desktopBg:'#1a1410', winBg:'#231d17', titlebar:'#5c3a1a', titlebarText:'#e8ddd0',
  text:'#e8ddd0', muted:'#a89882', accent:'#e8943a', hi:'#5a4a38', border:'#3a3028',
  inpBg:'#1a1410', btnBg:'#2c241c', btnText:'#e8ddd0', primaryBtnText:'#1a1410', pillBg:'#2c261e',
  bevelW:2, winPad:10, inpPad:4, btnPad:6, gridGap:8, maxWidth:800,
  font:"'Segoe UI', Tahoma, sans-serif", btnSize:13,
  statusbar:'on', groupbox:'groove', view:'all'
};

const PRESETS = {
  'Warm Dojo': {...DEFAULTS},
  'Classic 95': {
    desktopBg:'#008080',winBg:'#c0c0c0',titlebar:'#000080',titlebarText:'#ffffff',
    text:'#000000',muted:'#808080',accent:'#000080',hi:'#dfdfdf',border:'#808080',
    inpBg:'#ffffff',btnBg:'#c0c0c0',btnText:'#000000',primaryBtnText:'#ffffff',pillBg:'#dfdfdf',
    bevelW:2,winPad:8,inpPad:3,btnPad:4,gridGap:6,maxWidth:760,
    font:"'MS Sans Serif', Geneva, sans-serif",btnSize:12,statusbar:'on',groupbox:'groove'
  },
  'Ember': {
    desktopBg:'#120a06',winBg:'#1c1208',titlebar:'#8b3a00',titlebarText:'#ffd6a0',
    text:'#ffdec0',muted:'#b08860',accent:'#ff6a10',hi:'#6a4a2a',border:'#4a3420',
    inpBg:'#0e0806',btnBg:'#2a1c10',btnText:'#ffdec0',primaryBtnText:'#120a06',pillBg:'#241810',
    bevelW:2,winPad:10,inpPad:5,btnPad:6,gridGap:8,maxWidth:800,
    font:"'Segoe UI', Tahoma, sans-serif",btnSize:13,statusbar:'on',groupbox:'groove'
  },
  'Jade Dojo': {
    desktopBg:'#0a1410',winBg:'#122018',titlebar:'#1a4a30',titlebarText:'#d0ece0',
    text:'#d0ece0',muted:'#6a9a80',accent:'#30c870',hi:'#2a5a40',border:'#1a3a28',
    inpBg:'#081210',btnBg:'#1a2c22',btnText:'#d0ece0',primaryBtnText:'#0a1410',pillBg:'#142820',
    bevelW:2,winPad:10,inpPad:4,btnPad:6,gridGap:8,maxWidth:800,
    font:"'Segoe UI', Tahoma, sans-serif",btnSize:13,statusbar:'on',groupbox:'groove'
  },
  'Parchment': {
    desktopBg:'#d4c8a8',winBg:'#efe6d0',titlebar:'#7a5a30',titlebarText:'#efe6d0',
    text:'#3a2a14',muted:'#8a7a60',accent:'#9a6020',hi:'#c8b898',border:'#a89878',
    inpBg:'#faf4e4',btnBg:'#e0d4b8',btnText:'#3a2a14',primaryBtnText:'#efe6d0',pillBg:'#e8dcc0',
    bevelW:2,winPad:10,inpPad:4,btnPad:6,gridGap:8,maxWidth:800,
    font:"Tahoma, Geneva, sans-serif",btnSize:13,statusbar:'on',groupbox:'groove'
  }
};

const state = {...DEFAULTS};

// ======================== PREVIEW HTML BUILDERS ========================
function loginWindow() {
  return win('Login', `
    <div class="sv-login-row">
      <input class="sv-input" placeholder="brugernavn"/>
      <input class="sv-input" type="password" placeholder="password"/>
    </div>
    <div><button class="sv-btn">Log ind</button></div>
  `);
}

function formWindow() {
  return win('Log Session', `
    <div class="sv-topbar">
      <h2>Log session</h2>
      <button class="sv-btn sv-btn-ghost">Log ud</button>
    </div>
    <div class="sv-group" id="grpFields">
      <span class="sv-group-label">Session details</span>
      <div class="sv-grid">
        <label>Date<input class="sv-input" type="date" value="2026-02-07"/></label>
        <label>Activity
          <select class="sv-select"><option>karate</option><option>weights</option><option>run</option><option>rowing</option><option>cardio</option><option>rest</option></select>
        </label>
        <label>Duration (min)<input class="sv-input" type="number" value="60"/></label>
        <label>Energy (1-5)
          <select class="sv-select"><option>1</option><option>2</option><option>3</option><option value="4" selected>4</option><option>5</option></select>
        </label>
        <label>Emphasis
          <select class="sv-select"><option>technical</option><option>physical</option><option>mixed</option></select>
        </label>
        <label class="wide">Notes<input class="sv-input" placeholder="Timing off, good snap..."/></label>
      </div>
    </div>
    <div><button class="sv-btn sv-btn-primary">Save session</button></div>
  `, true);
}

function dayWindow() {
  return win('Day Overview', `
    <div style="display:flex;flex-direction:column;gap:6px;margin-bottom:8px">
      <input class="sv-input" type="date" value="2026-02-07"/>
      <button class="sv-btn sv-btn-ghost">View day</button>
    </div>
    <div class="sv-item">
      <div class="sv-itemTop">
        <div><b>karate</b></div>
        <div class="sv-pillStack">
          <span class="sv-pill">60m &middot; E4 &middot; technical</span>
          <button class="sv-btn-flat">Edit</button>
        </div>
      </div>
      <div class="sv-itemTop">
        <div class="sv-muted" style="font-size:12px">Effort: RPE 7</div>
      </div>
      <div class="sv-notes">Focused on kata timing. Mae-geri snap improving.</div>
    </div>
    <div class="sv-item">
      <div class="sv-itemTop">
        <div><b>weights</b></div>
        <div class="sv-pillStack">
          <span class="sv-pill">45m &middot; E3 &middot; physical</span>
          <button class="sv-btn-flat">Edit</button>
        </div>
      </div>
      <div class="sv-itemTop">
        <div class="sv-muted" style="font-size:12px">Effort: &mdash;</div>
      </div>
      <div class="sv-notes">Squats 5x5, bench 4x8. Grip felt weak.</div>
    </div>
  `);
}

function recentWindow() {
  const sessions = [
    {date:'2026-02-07',act:'karate',dur:60,e:4,emp:'technical',rpe:7,notes:'Focused on kata timing. Mae-geri snap improving.'},
    {date:'2026-02-06',act:'run',dur:35,e:3,emp:'physical',rpe:6,notes:''},
    {date:'2026-02-05',act:'rowing',dur:30,e:4,emp:'physical',rpe:null,notes:'Steady state 5k. Kept stroke rate at 22.'}
  ];
  return win('Recent Sessions', `
    <div class="sv-topbar">
      <h2>Recent sessions</h2>
      <button class="sv-btn sv-btn-ghost">Refresh</button>
    </div>
    ${sessions.map(s => `
      <div class="sv-item">
        <div class="sv-itemTop">
          <div><b>${s.date}</b> — ${s.act}</div>
          <div class="sv-pillStack">
            <span class="sv-pill">${s.dur}m &middot; E${s.e} &middot; ${s.emp}${s.rpe ? ' &middot; RPE '+s.rpe : ''}</span>
            <button class="sv-btn-flat">Delete</button>
          </div>
        </div>
        <div class="sv-notes">${s.notes || '<span class="sv-muted">No notes</span>'}</div>
      </div>
    `).join('')}
  `);
}

function win(title, body, hasStatus) {
  const sb = (state.statusbar === 'on' && hasStatus) ? `
    <div class="sv-statusbar">
      <span>Ready</span>
      <span>Sessions: 42</span>
    </div>` : '';
  return `
    <div class="sv-window">
      <div class="sv-titlebar">
        <span>${title}</span>
        <div class="sv-titlebar-btns">
          <button class="sv-titlebar-btn">_</button>
          <button class="sv-titlebar-btn">&square;</button>
          <button class="sv-titlebar-btn">&times;</button>
        </div>
      </div>
      <div class="sv-win-body">${body}</div>
      ${sb}
    </div>`;
}

// ======================== INIT ========================
function initControls() {
  document.querySelectorAll('.ctrl input[data-key], .ctrl select[data-key]').forEach(el => {
    const key = el.dataset.key;
    el.addEventListener('input', () => {
      if (el.type === 'range') state[key] = parseFloat(el.value);
      else state[key] = el.value;
      clearActivePreset();
      updateAll();
    });
  });

  const presetsEl = document.getElementById('presets');
  Object.keys(PRESETS).forEach(name => {
    const btn = document.createElement('button');
    btn.textContent = name;
    btn.onclick = () => applyPreset(name);
    presetsEl.appendChild(btn);
  });

  syncControlsToState();
  updateAll();
}

function syncControlsToState() {
  document.querySelectorAll('.ctrl input[data-key], .ctrl select[data-key]').forEach(el => {
    const key = el.dataset.key;
    if (state[key] !== undefined) el.value = state[key];
  });
}

function clearActivePreset() {
  document.querySelectorAll('.presets button').forEach(b => b.classList.remove('active'));
}

function applyPreset(name) {
  const p = PRESETS[name];
  if (!p) return;
  Object.keys(p).forEach(k => { state[k] = p[k]; });
  state.view = state.view || 'all';
  syncControlsToState();
  updateAll();
  document.querySelectorAll('.presets button').forEach(b => {
    b.classList.toggle('active', b.textContent === name);
  });
}

// ======================== UPDATE ========================
function updateAll() {
  renderPreview();
  updatePrompt();
  updateValues();
}

function updateValues() {
  document.querySelectorAll('.val[data-val]').forEach(el => {
    const key = el.dataset.val;
    const v = state[key];
    if (typeof v === 'number') el.textContent = v + (key === 'btnSize' ? 'px' : key === 'bevelW' ? 'px' : 'px');
    else el.textContent = v;
  });
}

function renderPreview() {
  const frame = document.getElementById('previewFrame');
  let html = '';
  if (state.view === 'all' || state.view === 'login') html += loginWindow();
  if (state.view === 'all' || state.view === 'form') html += formWindow();
  if (state.view === 'all' || state.view === 'day') html += dayWindow();
  if (state.view === 'all' || state.view === 'recent') html += recentWindow();

  frame.innerHTML = `<div class="sv" style="padding:16px">${html}</div>`;

  const sv = frame.querySelector('.sv');
  sv.style.setProperty('--win-bg', state.winBg);
  sv.style.setProperty('--titlebar', state.titlebar);
  sv.style.setProperty('--titlebar-text', state.titlebarText);
  sv.style.setProperty('--text', state.text);
  sv.style.setProperty('--muted', state.muted);
  sv.style.setProperty('--accent', state.accent);
  sv.style.setProperty('--hi', state.hi);
  sv.style.setProperty('--border', state.border);
  sv.style.setProperty('--inp-bg', state.inpBg);
  sv.style.setProperty('--btn-bg', state.btnBg);
  sv.style.setProperty('--btn-text', state.btnText);
  sv.style.setProperty('--primary-btn-text', state.primaryBtnText);
  sv.style.setProperty('--pill-bg', state.pillBg);
  sv.style.setProperty('--f', state.font);
  sv.style.setProperty('--bevel-w', state.bevelW + 'px');
  sv.style.setProperty('--win-pad', state.winPad + 'px');
  sv.style.setProperty('--inp-pad', state.inpPad + 'px ' + (state.inpPad + 4) + 'px');
  sv.style.setProperty('--btn-pad', state.btnPad + 'px ' + (state.btnPad + 6) + 'px');
  sv.style.setProperty('--btn-size', state.btnSize + 'px');
  sv.style.setProperty('--grid-gap', state.gridGap + 'px');

  // Groupbox style
  frame.querySelectorAll('.sv-group').forEach(g => {
    if (state.groupbox === 'none') {
      g.style.border = 'none';
      g.querySelector('.sv-group-label').style.display = 'none';
    } else {
      g.style.borderStyle = state.groupbox;
      g.querySelector('.sv-group-label').style.display = '';
    }
  });

  // Desktop bg & max width
  document.getElementById('previewBg').style.background = state.desktopBg;
  frame.style.maxWidth = state.maxWidth + 'px';
}

// ======================== PROMPT ========================
function updatePrompt() {
  const D = DEFAULTS;
  const parts = [];

  parts.push('Add a third theme option "dojo" (Win95 retro style with warm colors) to the Sansevaerk frontend. This theme uses beveled 3D borders (outset for windows/buttons, inset for inputs, groove for dividers) and zero border-radius throughout.');

  const colorChanges = [];
  if (state.desktopBg !== D.desktopBg) colorChanges.push(`page background: ${state.desktopBg}`);
  if (state.winBg !== D.winBg) colorChanges.push(`window/card background: ${state.winBg}`);
  if (state.titlebar !== D.titlebar) colorChanges.push(`titlebar: ${state.titlebar}`);
  if (state.titlebarText !== D.titlebarText) colorChanges.push(`titlebar text: ${state.titlebarText}`);
  if (state.text !== D.text) colorChanges.push(`text: ${state.text}`);
  if (state.muted !== D.muted) colorChanges.push(`muted: ${state.muted}`);
  if (state.accent !== D.accent) colorChanges.push(`accent: ${state.accent}`);
  if (state.hi !== D.hi) colorChanges.push(`bevel highlight: ${state.hi}`);
  if (state.border !== D.border) colorChanges.push(`border: ${state.border}`);
  if (state.inpBg !== D.inpBg) colorChanges.push(`input background: ${state.inpBg}`);
  if (state.btnBg !== D.btnBg) colorChanges.push(`button background: ${state.btnBg}`);
  if (state.btnText !== D.btnText) colorChanges.push(`button text: ${state.btnText}`);
  if (state.pillBg !== D.pillBg) colorChanges.push(`pill background: ${state.pillBg}`);

  if (colorChanges.length) {
    parts.push('Color palette: ' + colorChanges.join(', ') + '.');
  } else {
    parts.push(`Color palette: page background ${state.desktopBg}, window background ${state.winBg}, titlebar ${state.titlebar} with text ${state.titlebarText}, body text ${state.text}, muted ${state.muted}, accent ${state.accent}, bevel highlight ${state.hi}, inputs ${state.inpBg}, buttons ${state.btnBg}/${state.btnText}, pills ${state.pillBg}.`);
  }

  parts.push(`Geometry: ${state.bevelW}px bevel width, ${state.winPad}px window padding, ${state.inpPad}px input padding, ${state.btnPad}px button padding, ${state.gridGap}px grid gap. All border-radius: 0.`);

  if (state.font !== D.font) {
    const name = state.font.split(',')[0].replace(/'/g,'').trim();
    parts.push(`Font: ${name}.`);
  }

  if (state.statusbar === 'on') parts.push('Include a Win95-style statusbar at the bottom of the main app card.');
  if (state.groupbox !== 'groove') parts.push(`Use "${state.groupbox}" border style for field grouping.`);

  document.getElementById('promptText').textContent = parts.join('\n\n');
}

function copyPrompt() {
  const text = document.getElementById('promptText').textContent;
  navigator.clipboard.writeText(text).then(() => {
    const btn = document.getElementById('copyBtn');
    btn.textContent = 'Copied!';
    btn.classList.add('copied');
    setTimeout(() => { btn.textContent = 'Copy Prompt'; btn.classList.remove('copied'); }, 1500);
  });
}

// ======================== BOOT ========================
initControls();
applyPreset('Warm Dojo');
</script>
</body>
</html>
